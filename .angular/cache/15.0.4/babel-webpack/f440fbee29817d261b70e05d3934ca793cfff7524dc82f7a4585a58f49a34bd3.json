{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport { tap, map, Subject, filter, share, withLatestFrom, startWith, take } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"./fruit/fruit.component\";\nexport let AppComponent = /*#__PURE__*/(() => {\n  class AppComponent {\n    constructor(fb) {\n      this.fb = fb;\n      this.fruitForm = this.fb.group({\n        name: ['', Validators.required],\n        fruit: ['', Validators.minLength(6)],\n        date: ['']\n      });\n      this.submitSubject = new Subject();\n      // prettier-ignore\n      this.validFruit$ = this.fruitForm.statusChanges.pipe(map(status => status === 'VALID'), filter(Boolean));\n      // prettier-ignore\n      this.fruit$ = this.fruitForm.get('fruit').valueChanges.pipe(startWith(\"pomegranate\"), map(fruit => `it's a ${fruit}`));\n      //prettier-ignore\n      this.fruitSubmit$ = this.submitSubject.pipe(withLatestFrom(this.fruit$, (_, fruit) => fruit), tap({\n        next: n => console.log(Date.now(), n),\n        error: e => console.error(`uh oh something went wrong`, e),\n        complete: () => console.error('combinatation completed')\n      }), take(1), share());\n      this.fruitSubject = new Subject();\n    }\n    ngOnInit() {\n      this.fruitSubmit$.subscribe(this.fruitSubject);\n      this.fruitSubmit$.subscribe(next => {\n        console.log(`first op: ${next}`);\n        //\n        // operation\n        //\n      });\n    }\n  }\n\n  AppComponent.ɵfac = function AppComponent_Factory(t) {\n    return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder));\n  };\n  AppComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AppComponent,\n    selectors: [[\"my-app\"]],\n    decls: 1,\n    vars: 0,\n    template: function AppComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"app-fruit\");\n      }\n    },\n    dependencies: [i2.FruitComponent],\n    styles: [\"p[_ngcontent-%COMP%]{font-family:Lato}label[_ngcontent-%COMP%]{display:block}\"]\n  });\n  return AppComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}